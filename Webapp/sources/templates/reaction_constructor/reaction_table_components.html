{% macro reaction_description(reaction, tutorial) -%}
<div class="container-fluid" style="padding-left: 0px">
    <div id="reaction-name-description">
        <p>
            <textarea disabled id="js-reaction-name2" style="resize: horizontal;" rows="1" cols="50" placeholder="Please enter your reaction name">{% if tutorial == "yes" %}Tutorial Reaction{% else %}{{ reaction.name }}{% endif %}</textarea>
        </p>
        <p>
            <textarea id="js-reaction-description" rows="4" cols="100" placeholder="Please describe your reaction"></textarea>
        </p>
    </div>
    <p><b>Please fill in the highlighted boxes to proceed</b></p>
</div>
{%- endmacro  %}


{% macro table_headings() -%}
    <tr class="not-novel-compound-input">
        <th scope="col">&#8470;</th>
        <th scope="col">Reactants</th>
        <th scope="col">Limiting Reagent?</th>
        <th scope="col">Mol.Wt</th>
        <th scope="col">Density (g/mL)</th>
        <th scope="col">Conc. (M)</th>
        <th scope="col">Equiv.</th>
        <th scope="col">Amount<br>
            <select size="1" name="amountUnit" id="js-amount-unit">
                <option value="mol">mol</option>
                <option value="mmol" selected>mmol</option>
                <option value="μmol">μmol</option>
            </select>
        </th>
        <th scope="col">Volume<br>
            <select size="1" name="volumeUnit" id="js-volume-unit">
                <option value="mL" selected>mL</option>
                <option value="μL">μL</option>
            </select>
        </th>
        <th scope="col">Mass<br>
            <select size="1" name="massUnit" id="js-mass-unit">
                <option value="g">g</option>
                <option value="mg" selected>mg</option>
                <option value="μg">μg</option>
            </select>
        </th>
        <th scope="col">Physical Form</th>
        <th scope="col">Hazards</th>
        <th scope="col"></th>
        <th scope="col"></th>
    </tr>
{%- endmacro %}


{%  macro product_headings() -%}
    <tr class="not-novel-compound-input">
            <td></td>
            <td><b>Product</b></td>
            <td><b>Desired Product?</b></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td><select size="1" name="productAmountUnit" id="js-product-amount-unit">
                <option value="mol">mol</option>
                <option value="mmol" selected>mmol</option>
                <option value="μmol">μmol</option>
            </select></td>
            <td></td>
            <td><select size="1" name="productMassUnit" id="js-product-mass-unit">
                <option value="g">g</option>
                <option value="mg" selected>mg</option>
                <option value="μg">μg</option>
            </select></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
{%- endmacro %}

{%  macro reaction_class_dropdown(reaction_class, reaction_classes) -%}
<label for="reaction-class"><b>Reaction Class:</b> </label>
<select size="1" name="reactionClass" id="reaction-class">

     {% for option in reaction_classes %}
     {% if option == reaction_class %}
        <option value="{{option}}" SELECTED>{{option}}</option>
     {% else %}
        <option value="{{option}}">{{option}}</option>
    {% endif %}
    {% endfor %}
</select>
{%- endmacro %}


{%  macro physical_form_dropdown(index) -%}
<select size="1" class="physical-form" id="js-reactant-physical-form{{ index }}">
                    <option value="-select-" selected>-select-</option>
                    <option value="Dense solid">Dense solid</option>
                    <option value="Non-volatile liquid">Non-volatile liquid (b.p. &gt; 130&#8451;)</option>
                    <option value="Unknown">Unknown</option>
                    <option value="Dusty Solid">Dusty Solid</option>
                    <option value="Lyophilised solid">Lyophilised solid</option>
                    <option value="Volatile liquid">Volatile liquid (70&#8451; &le; b.p. &le; 130&#8451;)</option>
                    <option value="Gas">Gas</option>
                    <option value="Highly volatile liquid">Highly volatile liquid (b.p. &lt; 70&#8451;)</option>
                    <option value="Aerosol">Aerosol</option>
                    <option value="Solution that promotes skin absorption">Solution that promotes skin absorption</option>
                </select>
{%- endmacro %}


{% macro reactant_row(reactant, index) -%}
<tr class="not-novel-compound-input">
            <td><input id="js-reactant-table-number{{ index }}" style="width: 40px; border-width:0px;" type="number" value="{{ index }}" readonly></td>
            <td style='width: 200px;'><input  id="js-reactant{{ index }}" style="width: 200px; border-width:0px;" value="{{ reactant.compound_data.name }}"></td>
            <td><input  type="radio" step="any"
                    name="reactant-limiting" id="js-reactant-limiting{{ index }}" value="{{ index }}"  class="js-reactant-limiting">
            </td>
            <td><input style="width: 70px; border-width:0px;" type="number" step="any" value="{{ reactant.compound_data.molecular_weight }}"
                    id="js-reactant-molecular-weight{{ index }}" readonly>
            </td>
            <td><input style="width: 60px; border-width:0px;" type="number" step="any" placeholder="-" min="0"
                    {% if reactant_densities %}value="{{ reactant.density }}"{% endif %}
                    id="js-reactant-density{{ index }}"></td>
            <td><input style="width: 60px; border-width:0px;" type="number" step="any" placeholder="-" min="0"
                    {% if reactant.сoncentrations %}value="{{ reactant.сoncentrations }}"{% endif %}
                    id="js-reactant-concentration{{ index }}"></td>
            <td><input style="width: 60px;" type="number" step="any" min="0" id="js-reactant-equivalent{{ index }}" placeholder="-"
                    {% if index == 1 %} value="1" readonly {% else %}
                    {% if reactant.equivalents %}value="{{ reactant.equivalents }}"{% endif %}
                    {% endif %}></td>
            <td><input style="width: 60px; border-width:0px;" type="number" step="any" placeholder="-" min="0"
                    {% if rounded_reactant_amounts %}value="{{ rounded_reactant_amounts[index0] }}"{% endif %}
                    id="js-reactant-rounded-amount{{ index }}" class="js-reactant-rounded-amounts"
                    readonly></td>
            <td><input style="width: 60px; border-width:0px;" type="number" step="any" placeholder="-" min="0"
                    {% if rounded_reactant_volumes %}value="{{ rounded_reactant_volumes[index0] }}"{% endif %}
                    id="js-reactant-rounded-volume{{ index }}"
                    readonly></td>
            <td><input style="width: 60px;" type="number" step="any" placeholder="-" min="0" id="js-reactant-rounded-mass{{ index }}" class="js-reactant-rounded-masses"
                    {% if rounded_reactant_masses %}value="{{ rounded_reactant_masses[index0] }}"{% endif %}
                    {% if index == 1 %} {% else %}
                    readonly
                    {% endif %}></td>
            <td> {{ physical_form_dropdown(index) }} </td>
            <td><textarea class="text-in-table" id="js-reactant-hazards{{ index }}" readonly>{{ reactant.compound_data.hazards }}</textarea></td>
            <td><button onclick="reportWindow(this.id)" data-toggle="modal" data-target="#report-compound-data-modal" title="Report incorrect compound data" class="btn btn-outline-dark btn-light btn-sm" id="js-report-reactant{{ index }}" type="button"><i class="bi bi-exclamation-circle"></i></button></td>
            <td></td>
        </tr>
        <input type="hidden"
        {% if reactant_amounts %}value="{{ reactant_amounts[index0] }}"{% endif %}
        id="js-reactant-amount{{ index }}">
        <input type="hidden"
        {% if reactant_volumes %}value="{{ reactant_volumes[index0] }}"{% endif %}
        id="js-reactant-volume{{ index }}">
        <input type="hidden"
        {% if reactant_masses %}value="{{ reactant_masses[index0] }}"{% endif %}
        id="js-reactant-mass{{ index }}">
        <input type="hidden" value="{{ reactant.compound_data.primary_key }}" id="js-reactant-primary-key{{ index }}">
{%- endmacro %}


{% macro reagent_or_solvent_heading(type) -%}
    <tbody id="js-{{ type }}-table">
            <tr style="display: none" id="js-input-{{ type }}1">
                <td style="text-align:center;">New<br>Compound</td>
                <td>Name</td>
                <td>SMILES</td>
                <td>Hazard Codes</td>
                <td>CAS</td>
                <td>MW</td>
                <td>Density</td>
                <td>Conc.</td>
            </tr>
            <tr class="not-novel-compound-input" id="{{ type }}-row">
                <td></td>
                {{ reagent_or_solvent_title(type) }}
                <td><button id="js-add-new-{{ type }}-by-table" title="Add new {{ type }} to database" onclick="make{{ type|capitalize }}Input()" class="btn btn-outline-dark" style="width: fit-content;">Add new {{ type|capitalize }} to database</button></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td> {{ solvent_units_dropdown(type) }} </td>
                <td></td>
                <td></td>
                <td><button type="button" title="Add {{ type }} to reaction" onclick="addNew{{ type|capitalize }}()" class="js-add-{{ type }} btn btn-success" style="width: fit-content;">Add {{ type|capitalize }}</button></td>
            </tr>
            {{ add_to_database_row( type ) }}
        </tbody>
{%- endmacro %}


{%  macro reagent_or_solvent_title(type) -%}
    {% if type == "reagent" %}
        <td><b>Catalysts/reagents</b></td>
    {% else %}
        <td><b>Solvents</b></td>
    {% endif %}
{%- endmacro %}


{% macro solvent_units_dropdown(type) -%}
    {% if type == "solvent" %}
        <select size="1" name="solventVolumeUnit" id="js-solvent-volume-unit">
            <option value="mL" selected>mL</option>
            <option value="μL">μL</option>
        </select>
    {% endif %}
{%- endmacro  %}


{% macro solvent_heading() -%}
    <tbody id="js-solvent-table">
            <tr id="solvent-row">
                <td></td>
                <td><b>Solvents</b><button id="js-add-new-solvent-by-table" title="Add new solvent to database" onclick="makeSolventInput()" class="btn btn-outline-dark" style="width: fit-content;">Add new solvent to database</button></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td><select size="1" name="solventVolumeUnit" id="js-solvent-volume-unit">
                        <option value="mL" selected>mL</option>
                        <option value="μL">μL</option>
                    </select></td>
                <td></td>
                <td></td>
                <td><button type="button" title="Add solvent to reaction" onclick="addNewSolvent()" class="js-add-solvent btn btn-primary" style="width: fit-content;">Add Solvent</button></td>
            </tr>
            <tr style="display: none" id="js-input-solvent1">
                <td style="text-align:center;">New<br>Compound</td>
                <td>Name</td>
                <td>SMILES</td>
                <td>Hazard Codes</td>
                <td>CAS</td>
                <td>MW</td>
                <td>Density</td>
                <td>Conc.</td>
            </tr>
            {{ add_to_database_row("solvent") }}
        </tbody>
{%- endmacro %}


{% macro add_to_database_row(type) -%}
    <tr style="display: none" id="js-input-{{ type }}2">
                <td></td>
                <td><input style="width: 200px;" class="add-highlight-unfilled-cell no_autosave"  type="text" id="js-input-{{ type }}-name" placeholder="Required"></td>
                <td><input style="width: 200px" type="text" id="js-input-{{ type }}-smiles" placeholder="Optional" class="no_autosave"></td>
                <td><input style="width: 200px" type="text" id="js-input-{{ type }}-hazards" placeholder="Optional (HXXX-etc.)" class="no_autosave"></td>
                <td><input style="width: 200px" type="text" id="js-input-{{ type }}-cas" placeholder="Optional" class="no_autosave"></td>
                <td><input style="width: 60px" type="number" id="js-input-{{ type }}-mw" placeholder="Opt." class="no_autosave"></td>
                <td><input style="width: 60px" type="number" id="js-input-{{ type }}-density" placeholder="Opt." class="no_autosave"></td>
                <td><input style="width: 60px" type="number" id="js-input-{{ type }}-concentration" placeholder="Opt." class="no_autosave"></td>
                <td><button type="button" id="js-input-{{ type }}" class="btn btn-outline-dark"
                            onclick="submitNovelCompoundViaTable('{{ type }}')" title="Add compound to database" style="width: fit-content;">Input</button></td>
                <td><button type="button" id="js-input-cancel" class="js-input-cancel btn btn-outline-dark"
                            style="width: fit-content;" onclick="cancelNovelCompoundInput('{{ type }}')">Cancel</button></td>
            </tr>
{%- endmacro  %}


{%  macro product_row(product, index) -%}
<tr class="not-novel-compound-input">
            <td><input type="number" id="js-product-table-number{{ index }}" value="{{ product.idx }}" style="width:40px; border:none" readonly></td>
            <td style='width: 200px;'><input  id="js-product{{ index }}" style="width: 200px; border-width:0px;" value="{{ product.compound_data.name }}"></td>
            <td><input type="radio" id="js-main-product{{ index }}" name="js-main-product" value="{{ product.idx }}" class="js-main-product"></td>
                <script>
                $('input[name="js-main-product"]').first().prop('checked', true)
                </script>
            <td><input type="number" step="any" value="{{ product.compound_data.molecular_weight }}"
                       id="js-product-molecular-weight{{ index }}" style="width: 70px; border:none" readonly></td>
            <td></td>
            <td></td>
            <td></td>
            <td><input type="number" step="any" placeholder="-" min="0"
                {% if rounded_product_amounts %}value="{{ rounded_product_amounts[index0] }}"{% endif %}
                id="js-product-rounded-amount{{ index }}" style="width: 60px; border:none" readonly></td>
            <td></td>
            <td style="width:4.3em"><input type="number" step="any" placeholder="-" min="0"
                {% if rounded_product_masses %}value="{{ rounded_product_masses[index0] }}"{% endif %}
                id="js-product-rounded-mass{{ index }}" style="width: 60px; border:none" readonly></td>
            <td> {{ physical_form_dropdown(index) }} </td>
            <td><textarea class="text-in-table" id="js-product-hazard{{ index }}" readonly>{{ product.compound_data.hazards }}</textarea></td>
            <td><button onclick="reportWindow(this.id)" data-toggle="modal" data-target="#report-compound-data-modal" title="Report incorrect compound data" class="btn btn-outline-dark btn-light btn-sm" id="js-report-product{{ index }}" type="button"><i class="bi bi-exclamation-circle"></i></button></td>
            <td></td>
        </tr>
        <input type="hidden" {% if product_amounts %}value="{{ product_amounts[index0] }}"{% endif %}
               id="js-product-amount{{ index }}">
        <input type="hidden" {% if product_masses %}value="{{ product_masses[index0] }}"{% endif %}
               id="js-product-mass{{ index }}">
        <input type="hidden" value="{{ product.compound_data.primary_key }}" id="js-product-primary-key{{ index }}">
{%- endmacro %}
