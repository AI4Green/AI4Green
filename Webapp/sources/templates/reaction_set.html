{% extends "base.html" %}
{% block content %}
<head>
    <title>React Page</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/reaction_set.css') }}">
    <script type="text/javascript" src="{{ url_for('static', filename='js/reaction_table/autosave.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='js/reaction_table/input_novel_compounds.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='js/reaction_table/reaction_table.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='js/polymer.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='js/sketcher/integrated_marvin.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='js/sketcher/integrated_ketcher.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='js/reaction_set.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='js/sketcher/sketcher.js') }}"></script>

</head>
<body>
   <div class="container-fluid">
       <div class="row">
            <div class="col-12">
                <h1> {{ reaction_set.name }}</h1>
            </div>
       </div>

       <div class="row">
           <div class="col-4">
            <div class="row">
                <div class="col-12">
                    <div class="container-fluid">
                        <br>
                        <div class="controls">
                            <!-- Combined Selectors on One Line -->
                            <div class="row align-items-center">
                                <!-- Reactor Type Selector -->
{#                                    <label for="reactor-type" class="me-2">Reactor type: </label>#}
{#                                    <select id="reactor-type" class="form-select form-select-sm me-3" onchange="updateReactorType()">#}
{#                                        <option value="well-plate">Well plate</option>#}
{#                                        <option value="carousel">Carousel</option>#}
{#                                    </select>#}

                                <!-- Multiwell Selectors -->
                                <div id="wellplate-selector" class="col-8">
                                    <!-- Row and Column Selectors next to each other -->
                                         <div class="col-4">
                                            <button>+ Add Row</button>
                                        </div>
                                        <div class="col-4">
                                            <button>+ Add Column</button>
                                        </div>
                                </div>
                                 <!-- Carousel Selector -->
                                    <div class="col-auto" id="carousel-selector" style="display: none;">
                                        <button>
                                            + Add Reaction
                                        </button>
                                    </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <!-- Reactors Section -->
                        <div id="wellplate-container" style="display: block;">
                            <div id="plate-reactor" class="container-fluid">
                                <div id="grid-wrapper" class="outer-rectangle">
                                    <div id="grid" class="plate-reactor"></div>
                                </div>
                            </div>
                        </div>

                        <div id="carousel-container" style="display: none;">
                            <div id="carousel-wrapper" class="carousel-wrapper">
                                <div id="outer-circle" class="outer-circle">
                                    <div id="carousel" class="carousel-reactor"></div>
                                </div>
                            </div>
                        </div>
                </div>
            </div>
       </div>
       <div class="col-8">
            <div class="row">
                <div class="col-12">
                    <ul id="myTab" class="nav nav-tabs" role="tablist">
                      <li class="nav-item">
                          <a class="nav-link active" role="tab" data-toggle="tab" href="#setup" aria-selected="true">Set up</a>
                      </li>
                      <li class="nav-item">
                          <a class="nav-link" role="tab" data-toggle="tab" href="#results" aria-selected="false">Results</a>
                      </li>
                    <li class="nav-item">
                          <a class="nav-link" role="tab" data-toggle="tab" href="#export" aria-selected="false">Export?</a>
                      </li>
                    </ul>
                    <div class="tab-content">
                        <div class="tab-pane fade show active" id="setup" role="tabpanel" style="overflow-y:auto;">
                            <div id="sketchers-div" style="max-width: 100%; width: 100%;">
                                <div>
                                    <h3 id="js-reaction-id"></h3>
                                </div>
                                 <div>
                                    Selected Reaction Sketcher:
                                    <label> MarvinJS
                                        <input type="radio" id="marvin-select" name="sketcher-select" disabled>
                                    </label>
                                    <label> Ketcher
                                        <input type="radio" id="ketcher-select" name="sketcher-select" checked="checked" disabled>
                                    </label>
                                </div>

                                <div class="loading-circle"></div>
                                <div id="ketcher-sketcher" style="max-width: 100%; width: 100%;"></div>
                                <div id="marvin-sketcher" style="max-width: 100%; width: 100%;"></div>
                                <br>
                                <div class="container-fluid">
                                    <div class="row">
                                        <div class="col-2">
                                        <p><button id="apply-to-reaction" type="button" class="btn btn-success" style="width: 100%;" onclick="applyToReactionModal()">Apply to Reaction</button></p>
                                        </div>
                                        <div class="col-2">
                                        <p><button id="apply-to-well" type="button" class="btn btn-success" style="width: 100%;" onclick="applyToWellModal()">Apply to Well</button></p>
                                        </div>
                                        <div class="col-2">
                                            <p><button id="apply-to-all" type="button" class="btn btn-success" onclick="applyToAll()" style="width: 100%;">Apply to All</button></p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="results" class="tab-pane fade in" role="tabpanel" style="overflow-y:auto; max-height:550px">
                            <div id="placeholder"><br><b>fancy graphs, maybe interactive stuff?</b></div>
                        </div>

                        <div id="export" class="tab-pane fade in" role="tabpanel" style="overflow-y:auto; max-height:550px">
                            <br>
                            <div id="no-graphs"><b>maybe users can export these reactions in various formats</b>
                            </div>
                            <div class="scrollClass" id="saved-graph-list">
                                <div id="graph-details"></div>
                                </div>
                        </div>

                    </div>
                </div>
            </div>
       </div>
       </div>
       <div class="row" style="padding-left: 10px">
           <div class="col-12">
               <div id="reaction-table-div"></div>
           </div>
       </div>
   </div>


    <!-- Add-to-well modal -->
    <div class="modal fade" id="apply-to-well-modal" tabindex="-1" role="dialog" aria-labelledby="new-reaction-modal-title">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="new-reaction-modal-title">Select Wells</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"></button>
          </div>
          <div id="add-to-well-body">
              <div id="add-to-well-reactor-container" class="modal-container">
              </div>

          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-danger" data-dismiss="modal" id="new-reaction-data-close">Cancel</button>
            <button type="button" class="btn btn-success" id="new-reaction-data-submit" onclick="newReactionCreate()">Create</button>

          </div>
        </div>
      </div>
    </div>

<input type="hidden" value="{{ number_of_reactions }}" id="js-number-of-reactions">
<input type="hidden" value='{{ reaction_set | tojson | safe }}' id="js-reaction-set">
<input type="hidden" value="{}" id="js-reaction-table-data">
<input type="hidden" id="js-load-status">
<input type="hidden" id="js-reaction-name">
<input type="hidden" id="js-summary-table-data">
<input type="hidden" value='{{ workgroup_name }}' id="js-active-workgroup">
<input type="hidden" value='{{ reactor_dimensions }}' id="js-reactor-dimensions">
<input type="hidden" value='{{ workbook_name }}' id="js-active-workbook">
<input type="hidden" value="" id="js-reaction-rxn">
<input type="hidden" id="js-reaction-smiles">
<input type="hidden" value="{}" id="js-summary-table-data">


{% if reactor_type == "well_plate" %}
    <input type="hidden" value='{{ number_of_columns }}' id="js-columns">
    <input type="hidden" value='{{ number_of_rows}}' id="js-rows">
{% endif %}

</body>
{% endblock %}
